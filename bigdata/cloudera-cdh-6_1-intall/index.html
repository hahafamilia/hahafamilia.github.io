<!DOCTYPE html>
<html lang="en" class="js csstransforms3d">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="Hugo 0.57.2" />
    <meta name="description" content="hahafamilia blog">
<meta name="author" content="hahafamilia">

    <link rel="icon" href="/images/favicon.png" type="image/png">

    <title>Cloudera CDH 6.1.1 설치하기 :: haha family&#39;s happy blog</title>

    
    <link href="/css/nucleus.css?1578043510" rel="stylesheet">
    <link href="/css/fontawesome-all.min.css?1578043510" rel="stylesheet">
    <link href="/css/hybrid.css?1578043510" rel="stylesheet">
    <link href="/css/featherlight.min.css?1578043510" rel="stylesheet">
    <link href="/css/perfect-scrollbar.min.css?1578043510" rel="stylesheet">
    <link href="/css/auto-complete.css?1578043510" rel="stylesheet">
    <link href="/css/atom-one-dark-reasonable.css?1578043510" rel="stylesheet">
    <link href="/css/theme.css?1578043510" rel="stylesheet">
    <link href="/css/hugo-theme.css?1578043510" rel="stylesheet">
    
      <link href="/css/theme-custom.css?1578043510" rel="stylesheet">
    

    <script src="/js/jquery-3.3.1.min.js?1578043510"></script>

    <style>
      :root #header + #content > #left > #rlblock_left{
          display:none !important;
      }
      
        :not(pre) > code + span.copy-to-clipboard {
            display: none;
        }
      
    </style>
    


<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-145448356-1', 'auto');
	
	ga('send', 'pageview');
}
</script>


  </head>
  <body class="" data-url="/bigdata/cloudera-cdh-6_1-intall/">
    
<nav id="sidebar" class="">



  <div id="header-wrapper">
    <div id="header" onclick="window.location='https:\/\/hahafamilia.github.io\/';">
    </div>
    
        <div class="searchbox">
    <label for="search-by"><i class="fas fa-search"></i></label>
    <input data-search-input id="search-by" type="search" placeholder="Search...">
    <span data-search-clear=""><i class="fas fa-times"></i></span>
</div>

<script type="text/javascript" src="/js/lunr.min.js?1578043510"></script>
<script type="text/javascript" src="/js/auto-complete.js?1578043510"></script>
<script type="text/javascript">
    
        var baseurl = "https:\/\/hahafamilia.github.io\/";
    
</script>
<script type="text/javascript" src="/js/search.js?1578043510"></script>

    
  </div>
    <div class="highlightable">
    <ul class="topics">

        
          
          


 
  
    
    <li data-nav-id="/bigdata/" title="Bigdata" class="dd-item 
        parent
        
        
        ">
      <a href="/bigdata/">
          <i class='fas fa-angle-right'></i> Bigdata
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
             
            
          
             
            
          
             
            
          
             
            
          
             
            
          
             
            
          
             
            
          
             
            
          
             
            
          
             
            
          
             
            
          
             
            
          
             
            
          
             
            
          
             
            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/python/" title="Python" class="dd-item 
        
        
        
        ">
      <a href="/python/">
          <i class='fas fa-angle-right'></i> Python
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
             
            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/howto/" title="HowTo" class="dd-item 
        
        
        
        ">
      <a href="/howto/">
          <i class='fas fa-angle-right'></i> HowTo
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
             
            
          
             
            
          
             
            
          
             
            
          
             
            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/book/" title="Book" class="dd-item 
        
        
        
        ">
      <a href="/book/">
          <i class='fas fa-angle-right'></i> Book
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
             
            
          
             
            
          
             
            
          
             
            
          
             
            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/life/" title="Life" class="dd-item 
        
        
        
        ">
      <a href="/life/">
          <i class='fas fa-angle-right'></i> Life
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
             
            
          
             
            
          
        
        </ul>
              
    </li>
  
 

          
         
    </ul>

    
    
      <section id="shortcuts">
        <h3>More</h3>
        <ul>
          
              <li> 
                  <a class="padding" href="https://github.com/hahafamilia"><i class='fab fa-github'></i> Github</a>
              </li>
          
              <li> 
                  <a class="padding" href="https://hahafamilia.github.io/about"><i class='fas fa-address-card'></i> About</a>
              </li>
          
              <li> 
                  <a class="padding" href="https://tjstory.tistory.com"><i class='fas fa-blog'></i> 이전 블로그</a>
              </li>
          
              <li> 
                  <a class="padding" href="https://hahafamilia.github.io/tags"><i class='fas fa-tags'></i> Tags</a>
              </li>
          
        </ul>
      </section>
    

    
    <section id="footer">
      <p>Happy <i class="fas fa-heart"></i> hahaFamily</p>
    </section>
  </div>
</nav>





        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable">
              
              <div>
                <div id="top-bar">
                
                
                <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                    <span id="sidebar-toggle-span">
                        <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                          <i class="fas fa-bars"></i>
                        </a>
                    </span>
                  
                  <span id="toc-menu"><i class="fas fa-list-alt"></i></span>
                  
                  <span class="links">
                 
                 
                    
          
          
            
            
          
          
            
            
          
          
            <a href='/'>Developement and Life Blog</a> > <a href='/bigdata/'>Bigdata</a> > Cloudera CDH 6.1.1 설치하기
          
         
          
         
          
        
                 
                  </span>
                </div>
                
                    <div class="progress">
    <div class="wrapper">
<nav id="TableOfContents">
<ul>
<li>
<ul>
<li>
<ul>
<li><a href="#버전">버전</a></li>
</ul></li>
<li><a href="#설치하기-전에">설치하기 전에</a>
<ul>
<li><a href="#configure-network-names">Configure Network Names</a>
<ul>
<li><a href="#set-hostname-edit-etc-sysconfig-network">Set hostname, Edit /etc/sysconfig/network</a></li>
<li><a href="#edit-etc-hosts">Edit /etc/hosts</a></li>
<li><a href="#확인해보기">확인해보기</a></li>
</ul></li>
<li><a href="#disabling-the-firewall">Disabling the Firewall</a></li>
<li><a href="#setting-selinux-mode">Setting SELinux mode</a></li>
<li><a href="#enable-an-ntp-service">Enable an NTP Service</a></li>
<li><a href="#install-python2-7-on-hue-hosts">Install Python2.7 on Hue hosts</a></li>
<li><a href="#nproc-구성">nproc 구성</a></li>
<li><a href="#내부-parcel-repository-구성">내부 Parcel Repository 구성</a>
<ul>
<li><a href="#다운로드-서버">다운로드 서버</a></li>
<li><a href="#parcel-다운로드">Parcel 다운로드</a>
<ul>
<li><a href="#cdh6">CDH6</a></li>
<li><a href="#sqoop-connectors">Sqoop Connectors</a></li>
</ul></li>
</ul></li>
<li><a href="#내부-package-repository-구성">내부 Package Repository 구성</a>
<ul>
<li><a href="#package-다운로드">Package 다운로드</a></li>
</ul></li>
</ul></li>
<li><a href="#cloudera-manager-설치">Cloudera Manager 설치</a>
<ul>
<li><a href="#package-repository-등록">Package Repository 등록</a></li>
<li><a href="#install-jdk">Install JDK</a></li>
<li><a href="#install-cloudera-manager">Install Cloudera Manager</a></li>
<li><a href="#database-설치-및-구성">Database 설치 및 구성</a>
<ul>
<li><a href="#creating-databases-for-cloudera-software">Creating Databases for Cloudera Software</a></li>
<li><a href="#installing-jdbc-driver">Installing JDBC Driver</a></li>
</ul></li>
<li><a href="#set-up-the-cloudera-manager-database">Set up the Cloudera Manager Database</a>
<ul>
<li>
<ul>
<li><a href="#databse와-cloudera-manager-를-하나의-host에-설치한-경우">Databse와 Cloudera Manager 를 하나의 Host에 설치한 경우</a></li>
<li><a href="#database와-cloudera-manager-가-서로-다른-host인-경우">Database와 Cloudera Manager 가 서로 다른 Host인 경우</a></li>
</ul></li>
</ul></li>
</ul></li>
<li><a href="#cdh-및-기타-소프트웨어-설치">CDH 및 기타 소프트웨어 설치</a>
<ul>
<li><a href="#parcel-repository-등록">Parcel Repository 등록</a></li>
<li><a href="#ssh-설정">SSH 설정</a></li>
<li><a href="#설치-마법사">설치 마법사</a>
<ul>
<li><a href="#host-inspector">Host Inspector</a></li>
</ul></li>
<li><a href="#클러스터-생성">클러스터 생성</a></li>
</ul></li>
</ul></li>
</ul>
</nav>
    </div>
</div>

                
              </div>
            </div>
            
        <div id="head-tags">
        
<div class="tags">

  <a class="tag-link" href="/tags/cloudera">cloudera</a>

  <a class="tag-link" href="/tags/installation">installation</a>

</div>

        </div>
        
        <div id="body-inner">
          
            <h1>
              
              Cloudera CDH 6.1.1 설치하기
            </h1>
          

        





<p>ASIS 플랫폼의 고도화 일환으로 빅데이터 플랫폼을 신규로 구축하게 되었어요.
구축과정의 일환인 Cloudera CDH 6.1.1 설치과정을 뒤늦게사나마 정리해볼게요.
설치를 진행하기 전에 플랫폼 아키텍처의 설계와 물리서버 사양의 선택, 랙 배치 등이 우선되었겠죠?
이것에 대해서는 또 정리하도록 할게요.</p>

<p>설치 과정은 크게 3단계로 진행되요.</p>

<ol>
<li>설치하기 전에</li>
<li>Cloudera Manager 설치</li>
<li>CDH 구성요소 설치</li>
</ol>

<p>Cloudera CDH 6.1 버전의 공식 문서를 참고해서 진행했어요.</p>

<p><a href="https://docs.cloudera.com/documentation/enterprise/6/6.1.html">Cloudera Enterprise 6.1 Document</a></p>

<p><a href="https://docs.cloudera.com/documentation/enterprise/6/6.1/topics/installation.html">Cloudera Installation Guide</a></p>

<h3 id="버전">버전</h3>

<ul>
<li>CentOS 7.6.1810</li>
<li>Java 1.8</li>
<li>CDH 6.1.1 Express (free edition)</li>
</ul>

<blockquote>
<p>도메인은 example.com 으로 표기할게요. Repository 는 util01.example.com 호스트,
Cloudera Manager 는 util02.example.com 호스트, Database 는 db01.example.com 에 설치했어요.</p>

<p>사용된 명령어들은 운영체제와 버전등의 상황에 따라 다를수 있으니 섹션에 맞는 작업을 진행하면 되요.</p>

<p>Kerberos 인증, 이중화 관련 내용은 빠져 있어요.</p>
</blockquote>

<h2 id="설치하기-전에">설치하기 전에</h2>

<p>Cloudera 가이드 문서
<a href="https://docs.cloudera.com/documentation/enterprise/6/6.1/topics/installation_reqts.html">Before you Install</a>
과정 이예요.
이 과정에서는 설치패키지들의 관리와 운영체제 설정을 다루고 있어요.
Repository 구성을 제외하고 모든 물리 서버에 동일하게 구성해요.</p>

<h3 id="configure-network-names">Configure Network Names</h3>

<h4 id="set-hostname-edit-etc-sysconfig-network">Set hostname, Edit /etc/sysconfig/network</h4>

<pre><code class="language-sh">sudo hostnamectl set-hostname util01.example.com
sudo echo 'HOSTNAME=util01.example.com' &gt;&gt; /etc/sysconfig/network
</code></pre>

<h4 id="edit-etc-hosts">Edit /etc/hosts</h4>

<pre><code class="language-sh">192.168.100.101 util01.example.com util01
192.168.100.102 util02.example.com util02
192.168.100.103 master01.example.com master01
...
</code></pre>

<p>DNS 를 이용할경우 PTR(역방향조회) 설정이 되어 있어야 해요.</p>

<h4 id="확인해보기">확인해보기</h4>

<pre><code class="language-sh">uname -a
/sbin/ifconfig
host -v -t A $(hostname)
</code></pre>

<h3 id="disabling-the-firewall">Disabling the Firewall</h3>

<p>방화벽을 사용할경우 포트사용목록에 나열된 모든 포트를 허용 해야해요.</p>

<pre><code class="language-sh">sudo systemctl stop firewalld
sudo systemctl disable firewalld
</code></pre>

<blockquote>
<p><a href="https://docs.cloudera.com/documentation/enterprise/latest/topics/cdh_ports.html">CDH Components Ports</a></p>

<p><a href="https://docs.cloudera.com/documentation/enterprise/latest/topics/cm_ig_ports_cm.html">Cloudera Manager Ports</a></p>
</blockquote>

<h3 id="setting-selinux-mode">Setting SELinux mode</h3>

<p><code>getenforce</code> 명령어로 정책을 해서 <code>enforcing</code> 일경우
<em>/etc/selinux/config</em> 편집하여 <code>SELINUX=enforcing</code> 항목을
<code>SELINUX=permissive</code> 로 변경해요.</p>

<p>재부팅 하거나 <code>setenforce 0</code> 명령어로 즉시 반영해줘요.
SELinux는 설치가 종료된 후 정상화(<code>setenforce 1</code>) 해도되요.</p>

<h3 id="enable-an-ntp-service">Enable an NTP Service</h3>

<p><code>yum install ntp</code> NTP를 설치하고, <em>/etc/ntp.conf</em> 파일을 수정하여 NTP 서버를 추가합니다.</p>

<pre><code>server 0.pool.ntp.org
server 1.pool.ntp.org
server 2.pool.ntp.org
</code></pre>

<p><code>sudo systemctl start ntpd</code> 서비스를 시작하고,
<code>sudo systemctl enable ntpd</code> 부팅시 실행되도록 서비스 활성화 해주세요.</p>

<p><code>ntpdate -u 0.pool.ntp.org</code>, <code>hwclock —systohc</code> 명령어로 동기화 해주세요.</p>

<h3 id="install-python2-7-on-hue-hosts">Install Python2.7 on Hue hosts</h3>

<p>Hue 가 서비스되는 호스트에는 Python2.7 버전이 필요해요.</p>

<h3 id="nproc-구성">nproc 구성</h3>

<p>설치시 자동 구성되는데,
<em>/etc/security/limits.conf</em> 값은 <em>/etc/security/limits.d/</em> 값에 의해 무시될 수 있어요.
nproc 값은 65536, 262144 로 충분히 높게 설정하세요.</p>

<h3 id="내부-parcel-repository-구성">내부 Parcel Repository 구성</h3>

<p>Cloudera Software Repository 를 사용할경우, 항상 최신버전을 설치하게되요.
인터넷이 차단된 상황이거나 추후에 동일 버전으로 클러스터를 확장하기 위해서
내부 Repository 를 구성해야해요.
Cloudera CDH 구성요소를 설치 할때 Parcel 파일을 사용하게 되요.</p>

<h4 id="다운로드-서버">다운로드 서버</h4>

<p><code>sudo yum install httpd</code> 웹서버를 설치하고,
Apache HTTP Server 설정파일 <em>/etc/httpd/conf/httpd.conf</em> 의 Listen 포트도 주정해주고,
MIME 도 추가해주세요.</p>

<pre><code>Listen 18090

&lt;IfModule mime_module&gt; 
    AddType application/x-gzip .gz .tgz .parcel
</code></pre>

<p><code>sudo systemctl start httpd</code> Apache HTTP Server 시작</p>

<h4 id="parcel-다운로드">Parcel 다운로드</h4>

<h5 id="cdh6">CDH6</h5>

<pre><code class="language-sh">sudo mkdir -p /var/www/html/cloudera-repos
sudo wget --recursive --no-parent --no-host-directories https://archive.cloudera.com/cdh6/6.1.1/parcels/ -P /var/www/html/cloudera-repos
sudo wget --recursive --no-parent --no-host-directories https://archive.cloudera.com/gplextras6/6.1.1/parcels/ -P /var/www/html/cloudera-repos
sudo chmod -R ugo+rX /var/www/html/cloudera-repos/cdh6
sudo chmod -R ugo+rX /var/www/html/cloudera-repos/gplextras6
</code></pre>

<h5 id="sqoop-connectors">Sqoop Connectors</h5>

<pre><code>sudo mkdir -p /var/www/html/cloudera-repos
sudo wget --recursive --no-parent --no-host-directories http://archive.cloudera.com/sqoop-connectors/parcels/latest/ -P /var/www/html/cloudera-repos
sudo chmod -R ugo+rX /var/www/html/cloudera-repos/sqoop-connectors
</code></pre>

<p><a href="http://util01.example.com/cloudera-repos/">http://util01.example.com/cloudera-repos/</a> 저장소를 확인해보세요.</p>

<h3 id="내부-package-repository-구성">내부 Package Repository 구성</h3>

<p>Cloudera Manager 는 Package 를 이용해서 설치해요. 그전에 Package Repository 를 구성해줘요.</p>

<h4 id="package-다운로드">Package 다운로드</h4>

<pre><code>sudo wget --recursive --no-parent --no-host-directories https://archive.cloudera.com/cm6/6.1.1/redhat7/ -P /var/www/html/cloudera-repos
sudo wget https://archive.cloudera.com/cm6/6.1.1/allkeys.asc -P /var/www/html/cloudera-repos/cm6/6.1.1/
sudo chmod -R ugo+rX /var/www/html/cloudera-repos/cm6
</code></pre>

<p><em>/var/www/html/cloudera-repos/cm6/6.1.1/redhat7/yum/cloudera-manager.repo</em>
파일의 <code>baseurl</code> 의 주소를 수정해 주세요.</p>

<h2 id="cloudera-manager-설치">Cloudera Manager 설치</h2>

<h3 id="package-repository-등록">Package Repository 등록</h3>

<p>util01.example.com 호스트에 설치한 내부 Package Repository 를 등록해요.</p>

<pre><code class="language-sh">sudo wget http://util01.example.com:18090/cloudera-repos/cm6/6.1.1/redhat7/yum/cloudera-manager.repo -P /etc/yum.repos.d/
sudo rpm --import http://util01.example.com/cloudera-repos/cm6/6.1.1/redhat7/yum/RPM-GPG-KEY-cloudera
</code></pre>

<h3 id="install-jdk">Install JDK</h3>

<p><code>sudo yum install oracle-j2sdk1.8</code> 설치경로는 /usr/java/<installed version> 입니다.</p>

<h3 id="install-cloudera-manager">Install Cloudera Manager</h3>

<pre><code>sudo yum install cloudera-manager-daemons cloudera-manager-agent cloudera-manager-server
</code></pre>

<h3 id="database-설치-및-구성">Database 설치 및 구성</h3>

<p>Database 는 Cloudera Manager, Oozie Server, Hive Metastore Server, Hue Server 에서 사용해요.</p>

<p>Database 는 클러스터 외부의 호스트에 설치해주세요.
MySQL, MariaDB, PostgreSQL, Oracle 를 지원해요.
설치하는 방법은 Cloudera 문서
<a href="https://docs.cloudera.com/documentation/enterprise/6/6.1/topics/cm_ig_installing_configuring_dbs.html#concept_r5p_brw_vcb
sudo yum install mariadb-server">Installing and Configuring Databases</a>
로 대체할게요.
Cloudera 문서에는 Database 의 권장설정을 제시하고 있어요.
권장설정을 따라주세요.</p>

<pre><code>sudo systemctl enable mysqld
sudo systemctl start mysqld
</code></pre>

<p>MySQL로 설치했어요. 서비스등록하고, 데이터베이스 시작해주세요.
<code>sudo /usr/bin/mysql_secure_installation</code> 보안설정도 진행해주세요.</p>

<h4 id="creating-databases-for-cloudera-software">Creating Databases for Cloudera Software</h4>

<p>Cloudera 의 각 서비스들이 사용할 database 들을 생성해주고,
사용자 권한 설정 작업을 해주어야해요.</p>

<p>Database 가 설치된 호스트 서버에서 <code>mysql -u root -p</code> MySQL에 root 로 접속해주세요.</p>

<pre><code>CREATE DATABASE  &lt;databaseName&gt; DEFAULT CHARARCTER SET &lt;characterSet&gt; DEFAULT COLLATE utf8_general_ci;
GRANT ALL ON &lt;databaseName&gt;.* TO  '&lt;userName&gt;'@'%' IDENTIFIED BY '&lt;password&gt;';
</code></pre>

<p>생성해야 하는 Database 는 아래와 같아요.</p>

<table>
<thead>
<tr>
<th>Service</th>
<th>Database</th>
<th>UserName</th>
</tr>
</thead>

<tbody>
<tr>
<td>Cloudera Manager</td>
<td>scm</td>
<td>scm</td>
</tr>

<tr>
<td>Activity Monitor</td>
<td>amon</td>
<td>amon</td>
</tr>

<tr>
<td>Reports Manager</td>
<td>rman</td>
<td>rman</td>
</tr>

<tr>
<td>Hue</td>
<td>hue</td>
<td>hue</td>
</tr>

<tr>
<td>Hive Metastore</td>
<td>metastore</td>
<td>metastore</td>
</tr>

<tr>
<td>Sentry Server</td>
<td>sentry</td>
<td>sentry</td>
</tr>

<tr>
<td>Oozie</td>
<td>oozie</td>
<td>oozie</td>
</tr>
</tbody>
</table>

<p>잘 만들어졌는지 확인도 해볼게요.</p>

<pre><code>show databases;
show grants for '&lt;userName&gt;'@'%';
</code></pre>

<h4 id="installing-jdbc-driver">Installing JDBC Driver</h4>

<p>Database 를 사용하는 서버들에는 JDBC Driver 가 설치되어 있어야 하는데요.
우선 Cloudera Manager 를 설치할 util02.example.com 호스트 서버에 설치 해주세요.
Cloudera 는 MySQL 같은 경우 5.1 버전의 JDBC Driver 를 추천하고 있네요.</p>

<pre><code>wget https://dev.mysql.com/get/Downloads/Connector-J/mysql-connector-java-5.1.46.tar.gz
tar zxvf mysql-connector-java-5.1.46.tar.gz
sudo mkdir -p /usr/share/java/
cd mysql-connector-java-5.1.46
sudo cp mysql-connector-java-5.1.46-bin.jar /usr/share/java/mysql-connector-java.jar
</code></pre>

<h3 id="set-up-the-cloudera-manager-database">Set up the Cloudera Manager Database</h3>

<p>Cloudera Manager, Database 가 동일한 호스트인지 서로 다른 호스트인지에 따라 방법이 다른데요.
이 문서에서는 서로다른 서버에 설치하였어요.</p>

<h5 id="databse와-cloudera-manager-를-하나의-host에-설치한-경우">Databse와 Cloudera Manager 를 하나의 Host에 설치한 경우</h5>

<pre><code>sudo /opt/cloudera/cm/schema/scm_prepare_database.sh &lt;databaseName&gt; &lt;databaseUser&gt;;
</code></pre>

<h5 id="database와-cloudera-manager-가-서로-다른-host인-경우">Database와 Cloudera Manager 가 서로 다른 Host인 경우</h5>

<pre><code>sudo /opt/cloudera/cm/schema/scm_prepare_database.sh mysql -h &lt;dbDomain&gt; --scm-host &lt;cmDomain&gt; &lt;databaseName&gt; &lt;databaseUser&gt;;
# 예를들면
sudo /opt/cloudera/cm/schema/scm_prepare_database.sh mysql -h db01.example.com --scm-host util02.example.com scm scm
</code></pre>

<h2 id="cdh-및-기타-소프트웨어-설치">CDH 및 기타 소프트웨어 설치</h2>

<p>Cloudera Manager 설치를 마쳤어요.
이제 Cloudera Manager Server 를 실행하고, Admin Console 에 접속하면 CDH 설치가 시작되요.</p>

<p><code>sudo systemctl start cloudera-scm-server</code> Cloudera Manager Server 를 시작해요.
<a href="http://util02.example.com:7180/">http://util02.example.com:7180/</a> 주소를 통해 Cloudera Manager 관리 콘솔에 접속합니다.
최초 로그인 정보는 <code>admin</code> 입니다.</p>

<blockquote>
<p>CDH 는 Package 와 Parcels 로 설치가능한데, Cloudera는 Parcels 설치를 권장하고 있어요.
이유는 롤링 업그레이드 가능하기 때문이예요.</p>

<p>이 문서에서는 TLS 설정을 하지않고 진행했어요.</p>
</blockquote>

<h3 id="parcel-repository-등록">Parcel Repository 등록</h3>

<ul>
<li>Cloudera Manager WebUI &gt; Navigaton bar &gt; Hosts &gt; parcels &gt; Configuration</li>
<li>Cloudera Manager WebUI &gt; Menu &gt; Administration &gt; Settings &gt; Category &gt; Parcels</li>
</ul>

<p>위의 두 메뉴에서 원격 Repository URL
<em><a href="http://util01.example.com:18090/cloudera-repos/cdh6/6.1.1/parcels/">http://util01.example.com:18090/cloudera-repos/cdh6/6.1.1/parcels/</a></em>
을 등록 할 수 있어요.</p>

<h3 id="ssh-설정">SSH 설정</h3>

<p>각 호스트에 SSH 접속하여 설치가 진행되는데, root 비밀번호를 이용하거나,
공개키 설정이 되어 있어야 해요.</p>

<h3 id="설치-마법사">설치 마법사</h3>

<p>대부분 설치마법사가 이끈는 대로 따라가면 되고, 확인이 필요한 부분은
Cloudera 문서 <a href="https://docs.cloudera.com/documentation/enterprise/6/6.1/topics/install_software_cm_wizard.html">Install CDH and Other Software</a>
를 참고해 주세요.</p>

<h4 id="host-inspector">Host Inspector</h4>

<p>CDH 설치를 완료하면, Host Inspector 를 수행하고 아래와 같은 경고가 보일 수 있어요.</p>

<ul>
<li><p><em>Transparent Huge Page Compaction이 설정되었으며 심각한 성능 문제를 일으킬 수 있습니다.</em></p>

<ul>
<li><a href="https://allthatlinux.com/dokuwiki/doku.php?id=thp_transparent_huge_pages_%EA%B8%B0%EB%8A%A5%EA%B3%BC_%EC%84%A4%EC%A0%95_%EB%B0%A9%EB%B2%95">Transparent Huge Page</a>
메모리를 많이 사용하는 플랫폼에서는 설정을 꺼주는게 좋아요.</li>
</ul></li>

<li><p><em>Starting with CDH 6, PostgreSQL-backed Hue requires the Psycopg2 &hellip;</em></p>

<ul>
<li>Hue 서비스는 Python 2.7 을 필요로해요. 앞에서 이미 설정했어요.</li>
</ul></li>
</ul>

<h3 id="클러스터-생성">클러스터 생성</h3>

<p>Cloudera 문서
<a href="https://docs.cloudera.com/documentation/enterprise/6/6.1/topics/cm_ig_host_allocations.html">Recommended Role Distribution</a>
를 참고해서 Cluster 의 서비스 역할을 각 호스트에 어떻게 배치 할지에 대해 미리 계획을 세워두세요.</p>

<p>Cluster 를 생성하고, 사용자 지정 서비스를 선택하여,
HDFS, Hive, Hue, Impala, Kafka, Oozie, Spark, YARN, ZooKeeper를 설치하면되요.</p>


<footer class=" footline" >
	
</footer>


        
        </div> 
        
<div id="disqus_thread"></div>
<script type="text/javascript">

(function() {

    
    var logicalName = 'cloudera-cdh-6_1-intall.md';
    var relPermalink = '\/bigdata\/cloudera-cdh-6_1-intall\/';
    if (logicalName == "_index.md" || relPermalink == "/tags/" || relPermalink.includes("/tags/"))
        return;
        
    
    
    if (window.location.hostname == "localhost")
        return;

    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    var disqus_shortname = 'hahafamilia';
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
      </div>

    <div id="navigation">
        
        
        
        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
                        
            
            
        
                    
                        
            
            
        
                    
                        
            
            
        
                    
                        
            
            
        
                    
                        
            
            
        
                    
                        
            
            
        
                    
                        
            
            
        
                    
                        
            
            
        
                    
                        
            
            
        
                    
                        
            
            
        
                    
                        
            
            
        
                    
                        
            
            
        
                    
                        
            
            
        
                    
                        
            
            
        
                    
                        
            
            
        
                    
            
        
                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
                        
            
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
        
                    
                        
            
            
        
                    
                        
            
            
        
                    
                        
            
            
        
                    
                        
            
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
        
                    
                        
            
            
        
                    
                        
            
            
        
                    
                        
            
            
        
                    
                        
            
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
        
                    
                        
            
            
        
                    
            
        
                    
            
        
        
        


	 
	 
    </div>

    </section>
    
    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="/js/clipboard.min.js?1578043510"></script>
    <script src="/js/perfect-scrollbar.min.js?1578043510"></script>
    <script src="/js/perfect-scrollbar.jquery.min.js?1578043510"></script>
    <script src="/js/jquery.sticky.js?1578043510"></script>
    <script src="/js/featherlight.min.js?1578043510"></script>
    <script src="/js/highlight.pack.js?1578043510"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="/js/modernizr.custom-3.6.0.js?1578043510"></script>
    <script src="/js/learn.js?1578043510"></script>
    <script src="/js/hugo-learn.js?1578043510"></script>

    <link href="/mermaid/mermaid.css?1578043510" rel="stylesheet" />
    <script src="/mermaid/mermaid.js?1578043510"></script>
    <script>
        mermaid.initialize({ startOnLoad: true });
    </script>
    

  </body>
</html>

